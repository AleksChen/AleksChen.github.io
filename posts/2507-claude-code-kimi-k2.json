{"__ud_title":"Claude Code 中接入 Kimi K2 大模型","__ud_tags":["AI"],"__ud_update_time":1752745472159,"__ud_create_time":1752745161783,"__ud_draft":false,"type":"doc","content":[{"type":"heading","attrs":{"level":1,"id":"Claude-Code-中接入-Kimi-K2-大模型"},"content":[{"type":"text","text":"Claude Code 中接入 Kimi K2 大模型"}]},{"type":"heading","attrs":{"level":2,"id":"前言"},"content":[{"type":"text","text":"前言"}]},{"type":"paragraph","content":[{"type":"text","text":"Claude Code 是 Anthropic 推出的 AI 编程助手，具备强大的代码生成与理解能力。然而，受限于国内网络环境，Claude Sonnet 4、Claude Opus 4 等模型的使用门槛较高。为此，本文介绍如何将 Claude Code 切换为月之暗面最新发布的 Kimi K2 大模型，实现无缝对接与高效开发。"}]},{"type":"image","attrs":{"src":"/post-assets/md774iew-image-20250717161529431.png","alt":"image-20250717161529431.png","title":null}},{"type":"horizontalRule"},{"type":"paragraph"},{"type":"heading","attrs":{"level":2,"id":"环境准备"},"content":[{"type":"text","text":"环境准备"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"1. "},{"type":"text","marks":[{"type":"bold"}],"text":"安装最新版 Node.js"}]},{"type":"paragraph","content":[{"type":"text","text":"请前往 "},{"type":"text","marks":[{"type":"link","attrs":{"href":"https://nodejs.org/","target":"_blank","rel":"noreferer","class":null}}],"text":"Node.js 官网"},{"type":"text","text":"下载并安装。"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"2. "},{"type":"text","marks":[{"type":"bold"}],"text":"安装 Claude Code"}]},{"type":"paragraph","content":[{"type":"text","text":"终端执行："},{"type":"text","marks":[{"type":"code"}],"text":"npm install -g @anthropic-ai/claude-code"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"3. "},{"type":"text","marks":[{"type":"bold"}],"text":"注册 Kimi API 平台账号并获取 API Key"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"打开 "},{"type":"text","marks":[{"type":"link","attrs":{"href":"https://kimi.moonshot.cn/","target":"_blank","rel":"noreferer","class":null}}],"text":"Kimi API 平台"},{"type":"text","text":"，注册账号。"}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"登录后，新建 API Key。"}]}]}]},{"type":"image","attrs":{"src":"/post-assets/md774iey-image-20250717155709394.png","alt":"image-20250717155709394.png","title":null}},{"type":"paragraph","content":[{"type":"hardBreak"}]},{"type":"paragraph","content":[{"type":"text","text":"4. "},{"type":"text","marks":[{"type":"bold"}],"text":"充值升级账号（强烈建议）"}]},{"type":"paragraph","content":[{"type":"text","text":"免费版 Kimi API 限制较多，建议充值 50 元升级至 Tier1，解锁更高额度和更稳定的调用权限。"}]},{"type":"image","attrs":{"src":"/post-assets/md774iez-image-20250717155753583.png","alt":"image-20250717155753583.png","title":null}},{"type":"heading","attrs":{"level":2,"id":"API-Key-配置"},"content":[{"type":"text","text":"API Key 配置"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"修改 Claude Code 的默认配置，使用自定义的模型能力。"}]},{"type":"heading","attrs":{"level":3,"id":"Windows"},"content":[{"type":"hardBreak"},{"type":"text","text":"Windows"}]},{"type":"paragraph","content":[{"type":"text","text":"在命令提示符中执行："}]},{"type":"codeBlock","attrs":{"language":"bash"},"content":[{"type":"text","text":"setx ANTHROPIC_AUTH_TOKEN \"你的 API 密钥\"\nsetx ANTHROPIC_BASE_URL \"https://api.moonshot.cn/anthropic\""}]},{"type":"paragraph"},{"type":"heading","attrs":{"level":3,"id":"macOS--Linux"},"content":[{"type":"text","text":"macOS / Linux"}]},{"type":"paragraph","content":[{"type":"text","text":"根据所用终端类型，编辑对应配置文件："}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Bash 用户："},{"type":"text","marks":[{"type":"code"}],"text":"~/.bashrc"}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Zsh 用户："},{"type":"text","marks":[{"type":"code"}],"text":"~/.zshrc"}]}]}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"添加如下内容："}]},{"type":"codeBlock","attrs":{"language":"bash"},"content":[{"type":"text","text":"export ANTHROPIC_AUTH_TOKEN=你的API密钥\nexport ANTHROPIC_BASE_URL=https://api.moonshot.cn/anthropic"}]},{"type":"paragraph","content":[{"type":"text","text":"保存后，执行 "},{"type":"text","marks":[{"type":"code"}],"text":"source ~/.zshrc"},{"type":"text","text":" 或重启终端使配置生效。"}]},{"type":"paragraph"},{"type":"horizontalRule"},{"type":"paragraph"},{"type":"heading","attrs":{"level":2,"id":"启动与模型切换验证"},"content":[{"type":"text","text":"启动与模型切换验证"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"1. 进入项目目录，运行："},{"type":"text","marks":[{"type":"code"}],"text":"claude"}]},{"type":"paragraph","content":[{"type":"text","text":"2. 启动后，界面下方 Overrides 区域应显示 API Key 和 API Base 信息。"}]},{"type":"image","attrs":{"src":"/post-assets/md774iez-image-20250717155925831.png","alt":"image-20250717155925831.png","title":null}},{"type":"paragraph","content":[{"type":"text","text":"3. 随便输入点啥（友情提示：每次输入都要花钱），只要 tokens 在跳动，恭喜你，模型已上线。"}]},{"type":"image","attrs":{"src":"/post-assets/md774iez-image-20250717160008829.png","alt":"image-20250717160008829.png","title":null}},{"type":"image","attrs":{"src":"/post-assets/md774iez-image-20250717161127189.png","alt":"image-20250717161127189.png","title":null}},{"type":"blockquote","content":[{"type":"paragraph","content":[{"type":"text","marks":[{"type":"italic"}],"text":"界面写着 claude，其实背后已经是 kimi-k2-0711-preview 在默默搬砖。"}]}]},{"type":"horizontalRule"},{"type":"paragraph"},{"type":"heading","attrs":{"level":2,"id":"常见问题与排查"},"content":[{"type":"text","text":"常见问题与排查"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"bold"}],"text":"1.API Key 配置无效"},{"type":"text","text":"："}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"检查密钥是否有误，或是否已生效（重启终端/重新加载配置文件）。"}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"免费额度用尽或账号未充值也会导致调用失败。"}]}]}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"bold"}],"text":"2.无法切换模型："}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"确认 ANTHROPIC_BASE_URL 是否正确填写为 `https://api.moonshot.cn/anthropic`。"}]}]}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"bold"}],"text":"3.调用费用过高："}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"每次输入均计费，建议合理规划调用频率。"}]}]}]},{"type":"paragraph"},{"type":"horizontalRule"},{"type":"paragraph"},{"type":"heading","attrs":{"level":2,"id":"Kimi-K2-大模型的真香时刻"},"content":[{"type":"text","text":"Kimi K2 大模型的\"真香\"时刻"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"1. "},{"type":"text","marks":[{"type":"bold"}],"text":"代码能力爆表"},{"type":"text","text":"："}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"各种榜单吊打 GPT-4.1、DeepSeek-V3，自动化、企业开发都不在话下。"}]}]}]},{"type":"paragraph","content":[{"type":"text","text":"2. "},{"type":"text","marks":[{"type":"bold"}],"text":"超大上下文，记忆力惊人"},{"type":"text","text":"："}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"128k tokens，几十万字随便塞，长文档、老项目都能 hold 住。"}]}]}]},{"type":"paragraph","content":[{"type":"text","text":"3. "},{"type":"text","marks":[{"type":"bold"}],"text":"价格感人，合规省心"},{"type":"text","text":"："}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"输入 1 美元/百万 tokens，输出 3 美元/百万 tokens，省下的钱可以多喝几杯咖啡。"}]}]}]},{"type":"paragraph","content":[{"type":"text","text":"4. "},{"type":"text","marks":[{"type":"bold"}],"text":"生态丰富，接口友好"},{"type":"text","text":"："}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"兼容 Anthropic 协议，CLI、GUI、VSCode 插件全都能用。"}]}]}]},{"type":"paragraph"},{"type":"heading","attrs":{"level":3,"id":"注意事项"},"content":[{"type":"text","text":"注意事项"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"API Key 属于敏感信息，请妥善保管，避免泄露。"}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"免费额度有限，建议及时充值以保证服务稳定。"}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"若需切换回 Claude 原生模型，只需恢复默认 ANTHROPIC_BASE_URL。"}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"费用按 tokens 计费，注意控制调用频率。"}]}]}]},{"type":"paragraph"},{"type":"horizontalRule"},{"type":"paragraph"},{"type":"heading","attrs":{"level":2,"id":"总结"},"content":[{"type":"text","text":"总结"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"通过上述配置，即可在 Claude Code 中无缝接入 Kimi K2 大模型，享受高效、低成本的智能编程体验。Kimi K2 在代码生成、上下文处理、工程兼容性等方面均表现优异，是国内开发者的理想选择。"}]}]}